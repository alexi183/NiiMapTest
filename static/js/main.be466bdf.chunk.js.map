{"version":3,"sources":["actions/Map.js","reducers/MapReducer.js","stores/store.js","helpers/validate.js","components/Form/Form.js","components/Map/Map.js","container/MapContainer.js","index.js"],"names":["ADD_ITEM","INITIAL_STATE","marks","count","delete","MapReducer","state","arguments","length","undefined","action","type","actions","Object","toConsumableArray","find","item","title","toLowerCase","objectSpread","concat","updatedList","splice","payload","reducer","combineReducers","form","formReducer","plugin","persistedState","serializedState","localStorage","getItem","JSON","parse","e","console","log","loadFromLocalStorage","store","createStore","applyMiddleware","reduxThunk","logger","subscribe","stringify","setItem","saveToLocalStorage","getState","min","max","required","value","checkLength1","renderField","_ref","input","name","placeholder","className","_ref$meta","meta","touched","error","react_default","a","createElement","assign","renderInputMask","_ref2","reactTextMask_default","mask","keepCharPositions","reduxForm","_ref3","addItem","handleSubmit","changeData","deleteMark","time","removeItem","timer","resetItem","lastMarkId","onSubmit","Field","component","validate","val","onClick","setInterval","setTimeout","MapComponent","props","obj","latitude","longitude","react_yandex_maps_umd_production_min","center","zoom","controls","width","height","modules","map","i","key","geometry","options","preset","properties","iconCaption","MapContainer","components_Form_Form","this","Map_Map","Component","connect","dispatch","form2","id","values","root","document","getElementById","ReactDOM","render","es","src_container_MapContainer"],"mappings":"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","file":"static/js/main.be466bdf.chunk.js","sourcesContent":["export const ADD_ITEM = 'ADD_ITEM';\nexport const REMOVE_ITEM = 'REMOVE_ITEM';\nexport const RESET_ITEM = 'RESET_ITEM';\nexport const TIMER = 'TIMER';\n\nexport function addItem() {\n   return (dispatch, getState) => {\n      const form = getState().form.marks;\n      const form2 = getState();\n      console.log(form2);\n      const bookId = getState().marks.marks.length;\n      const marks = {\n         id: +bookId+1,\n         title: form.values.title,\n         latitude: +form.values.latitude,\n         longitude: +form.values.longitude\n      };\n      dispatch({\n         type: ADD_ITEM,\n         marks\n      });\n   }\n}\n\nexport const removeItem = (id) => ({\n   type: REMOVE_ITEM,\n   payload: id\n});\n\nexport const resetItem = () => ({\n   type: RESET_ITEM\n});\n\nexport const timer = () => ({\n   type: TIMER\n})","import * as actions from '../actions/Map';\n\nconst INITIAL_STATE = {\n   marks: [],\n   count: 3,\n   delete: false\n}\n\nconst MapReducer = (state = INITIAL_STATE, action) => {\n   switch (action.type) {\n\n      case actions.ADD_ITEM:\n\n         if ([...state.marks].find((item) =>\n             item.title.toLowerCase() === action.marks.title.toLowerCase())\n         ) {\n            return {...state, marks: [...state.marks, action.marks], delete: true}\n\n         } else {\n            return {...state, marks: [...state.marks, action.marks], delete: false}\n         }\n\n\n      case actions.REMOVE_ITEM:\n\n         let updatedList = [...state.marks];\n         updatedList.splice(action.payload, 1)\n\n         return {...state, marks: updatedList, delete: false}\n\n\n      case actions.RESET_ITEM:\n         return {...state, delete: false}\n\n\n      case actions.TIMER:\n\n         if(state.count > 0) {\n            state.count--\n         } else if (state.count === 0) {\n            state.count = 3\n         }\n\n         return {...state, count: state.count}\n\n      default: {\n         return state;\n      }\n   }\n};\n\nexport default MapReducer;\n","import { createStore, applyMiddleware, combineReducers } from 'redux';\r\nimport reduxThunk from 'redux-thunk';\r\nimport logger from 'redux-logger';\r\nimport { reducer as formReducer } from 'redux-form';\r\nimport MapReducer from \"../reducers/MapReducer\";\r\nimport {ADD_ITEM} from '../actions/Map';\r\n\r\nfunction saveToLocalStorage(state) {\r\n   try {\r\n      const serializedState = JSON.stringify(state)\r\n      localStorage.setItem('state', serializedState)\r\n   } catch (e) {\r\n      console.log(e)\r\n   }\r\n}\r\n\r\nfunction loadFromLocalStorage() {\r\n   try {\r\n      const serializedState = localStorage.getItem('state')\r\n      if (serializedState === null) return undefined\r\n      return JSON.parse(serializedState)\r\n   } catch (e) {\r\n      console.log(e)\r\n      return undefined\r\n   }\r\n}\r\n\r\nconst reducer = combineReducers({\r\n   marks: MapReducer,\r\n/*   form: formReducer,*/\r\n\r\n   form: formReducer.plugin({\r\n      marks: (state, action) => {\r\n         switch(action.type) {\r\n            case ADD_ITEM:\r\n               return undefined;\r\n            default:\r\n               return state;\r\n         }\r\n      }\r\n   })\r\n});\r\n\r\nconst persistedState = loadFromLocalStorage();\r\n\r\nconst store = createStore(\r\n    reducer,\r\n    persistedState,\r\n    applyMiddleware(reduxThunk, logger));\r\n\r\nstore.subscribe(() => saveToLocalStorage(store.getState()));\r\n\r\nexport default store;\r\n\r\n\r\n","export const required = value => (!value && 'Поле обязательно для заполнения');\r\n\r\nexport const checkLength = (min, max) => value =>\r\n    value && (value.length > max || value.length < min) && `Количество символов не должно превышать ${max} и не быть менее ${min}`;\r\n\r\nexport const checkLength1 = checkLength(3, 75);\r\n","import React from 'react';\r\nimport { reduxForm, Field } from 'redux-form'\r\nimport * as val from \"../../helpers/validate\";\r\nimport MaskedInput from 'react-text-mask';\r\nimport 'react-datepicker/dist/react-datepicker.css';\r\nimport \"./Form.css\";\r\n\r\nconst renderField = (\r\n    { input, type, name, placeholder, className, meta: { touched, error }}) => (\r\n\r\n    <div className=\"form-row-input\">\r\n       <input {...input}\r\n              className={`${touched && error ? \"form-control is-invalid\" :\r\n                  className}`}\r\n              placeholder={placeholder}\r\n              type={type}\r\n              name={name}\r\n       />\r\n       {touched && error && <span className=\"error\">{error}</span>}\r\n    </div>\r\n);\r\n\r\nconst renderInputMask = ({ input, placeholder, name, className }) =>\r\n    <div className=\"form-row-input\">\r\n       <MaskedInput\r\n           mask={[/\\d/,/\\d/, '.', /\\d/, /\\d/]}\r\n           name={name}\r\n           {...input}\r\n           keepCharPositions={true}\r\n           placeholder={placeholder}\r\n           className={className}\r\n       />\r\n    </div>\r\n\r\nconst Form = ({\r\n                 addItem,\r\n                 changeData,\r\n                 handleSubmit,\r\n                 time, deleteMark,\r\n                 removeItem,\r\n                 marks,\r\n                 count,\r\n                 timer,\r\n                 resetItem}) => {\r\n\r\n   let lastMarkId = marks.length-1;\r\n\r\n   console.log(lastMarkId);\r\n\r\n   console.log('deleteMark-', deleteMark)\r\n\r\n   console.log('reset-', resetItem);\r\n\r\n   return (\r\n       <form className=\"form\" onSubmit={handleSubmit(addItem)}>\r\n          <div className=\"form-group\">\r\n             <label>Заголовок</label>\r\n             <Field type=\"text\"\r\n                    placeholder=\"Введите заголовок\"\r\n                    className=\"form-control\"\r\n                    component={renderField}\r\n                    validate={[val.required, val.checkLength1]}\r\n                    name=\"title\"\r\n             />\r\n          </div>\r\n\r\n          <div className=\"form-group\">\r\n             <label>Широта</label>\r\n             <Field type=\"text\"\r\n                    className=\"form-control\"\r\n                    placeholder=\"__ . __\"\r\n                    name=\"latitude\"\r\n                    validate={val.required}\r\n                    component={renderInputMask}\r\n             />\r\n          </div>\r\n\r\n          <div className=\"form-group\">\r\n             <label>Долгота</label>\r\n             <Field type=\"text\"\r\n                    className=\"form-control\"\r\n                    placeholder=\"__ . __\"\r\n                    name=\"longitude\"\r\n                    validate={val.required}\r\n                    component={renderInputMask}\r\n             />\r\n          </div>\r\n\r\n          <button type=\"submit\" className=\"btn btn-primary mb-5\">\r\n             Добавить маркер\r\n          </button>\r\n\r\n          <button type=\"button\" onClick={() => setInterval(timer(), 1000)} className=\"btn btn-primary mb-5\">\r\n             Таймер\r\n          </button>\r\n\r\n          <div>\r\n             {count}\r\n          </div>\r\n\r\n          {\r\n             deleteMark &&\r\n             <div>\r\n                <div> Маркер с данным именем уже существует. Удалить его ? </div>\r\n                <div>\r\n                   <button type=\"button\" className=\"btn btn-primary mb-5 mr-3\"\r\n                           onClick={() => setTimeout(removeItem, 3000,lastMarkId)}>Да\r\n                   </button>\r\n                   <button type=\"button\" className=\"btn btn-primary mb-5\"\r\n                           onClick={() => resetItem()}>Нет\r\n                   </button>\r\n                </div>\r\n\r\n                {/*{time}*/}\r\n             </div>\r\n          }\r\n       </form>\r\n   )\r\n}\r\n\r\nexport default reduxForm({\r\n   form: 'marks'\r\n})(Form);","import React from 'react';\r\nimport {Map, Placemark, YMaps} from 'react-yandex-maps'\r\nimport './Map.css'\r\n\r\nconst MapComponent = (props) => {\r\n\r\n   let obj = props.marks[props.marks.length-1];\r\n\r\n   console.log((obj) && [obj.latitude, obj.longitude]);\r\n\r\n   return (\r\n       <YMaps>\r\n          <Map\r\n              state={{\r\n                 center: [55.75, 37.57],\r\n                 zoom: 9,\r\n                 controls: ['zoomControl', 'fullscreenControl'],\r\n              }}\r\n              width={500}\r\n              height={500}\r\n              modules={['control.ZoomControl', 'control.FullscreenControl']}\r\n          >\r\n\r\n             {props.marks.map((item, i) =>\r\n                     /* (item.latitude, item.longitude).contains ?*/\r\n                     <Placemark\r\n                         key={i}\r\n                         geometry={[item.latitude, item.longitude]}\r\n                         options={{\r\n                            preset: 'islands#nightDotIcon'\r\n                         }}\r\n                         properties={{\r\n                            iconCaption: item.title\r\n                         }}\r\n                     />\r\n                 // :\r\n                 // <div>\r\n                 //    Координаты выходят за рамки карты\r\n                 // </div>\r\n             )}\r\n\r\n          </Map>\r\n       </YMaps>\r\n   )\r\n}\r\n\r\nexport default MapComponent;\r\n\r\n","import React, { Component } from 'react';\nimport {connect} from \"react-redux\";\nimport Form from \"../components/Form/Form\";\nimport MapComponent from \"../components/Map/Map\";\nimport * as actions from \"../actions/Map\";\nimport './MapContainer.css';\n\nclass MapContainer extends Component {\n\n   render() {\n\n      return (\n          <div className=\"wrapper d-flex\">\n             <div className=\"col\">\n                <Form {...this.props} />\n             </div>\n             <div className=\"col\">\n                <MapComponent {...this.props} />\n             </div>\n          </div>\n      );\n   }\n}\n\nconst mapStateToProps = state => {\n   return {\n      marks: state.marks.marks,\n      time: state.marks.count,\n      deleteMark: state.marks.delete,\n      count: state.marks.count\n   };\n};\n\nconst mapDispatchToProps = dispatch => {\n   return {\n      addItem: () => dispatch(actions.addItem()),\n      removeItem: (state) => dispatch(actions.removeItem(state)),\n      resetItem: () => dispatch(actions.resetItem()),\n      timer: () => dispatch(actions.timer())\n   };\n};\n\nexport default connect(\n    mapStateToProps,\n    mapDispatchToProps\n)(MapContainer);\n\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport { Provider } from 'react-redux';\nimport store from './stores/store';\nimport MapContainer from \"./container/MapContainer\";\nimport 'bootstrap/dist/css/bootstrap.min.css';\n\nlet root = document.getElementById('root');\n\nReactDOM.render(\n    <Provider store={store}>\n       <MapContainer />\n    </Provider>\n    , root\n);\n\n\n\n\n\n\n\n"],"sourceRoot":""}